<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>ABAP File Formats, #abapconf2022</title>

  <link rel="icon" type="image/svg+xml" href="./favicon.svg" sizes="any">
  <link rel="mask-icon" href="./favicon.svg" color="#000000">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"
    integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/v4-shims.min.css"
    integrity="sha256-wN7QJaqAwQ03kgUhyN4EU2phRdDkLrQYbFe0EvpQ60U=" crossorigin="anonymous" />
  <link rel="stylesheet" href="ext/reveal.js/dist/reset.css">
  <link rel="stylesheet" href="ext/reveal.js/dist/reveal.css">
  <link rel="stylesheet" href="ext/reveal.js/dist/theme/black.css">

  <!-- Theme used for syntax highlighted code -->
  <link rel="stylesheet" href="ext/reveal.js/plugin/highlight/monokai.css">

  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="reveal">
    <div class="slides">

      <section>
        <h1>ABAP File Formats</h1>
        <a href="https://www.abapconf.org"><img src="./img/abap_logo_blau_2022.svg" class="plain"
            height="200px"></a><br>
      </section>

      <section>
        <table><tr><td>
          <p>Albert Mink, <a href="https://sap.com">@SAP</a></p>
          <p>Lars Hvam, <a href="https://heliconialabs.com">@heliconialabs</a></p>
        </td></tr></table>
      </section>

      <section>
        <h1>Disclaimer</h1>
        <ul>
          <li>Everything might change</li>
          <li>Check respective licenses</li>
        </ul>
      </section>

      <section>
        <h2>History of sharing ABAP code</h2>
        <img src="./img/timeline.drawio.svg" class="plain" width="400px">
        <p>Let's talk about the ABAP file formats</p>
        <img src="./img/aff.drawio.svg" class="plain" width="400px">
      </section>

      <section>
        <h2>Why ABAP file formats (AFF)?</h2>
        <img src="./img/db.png" class="plain" height="200">
        <img src="./img/arrows.png" class="plain" height="200">
        <img src="./img/file.png" class="plain" height="200">
        <p>Public definition of file content that is <em>human-readable, complete</em> and <em> without redundancy</em></p>
      </section>

      <section>
        <h2>How?</h2>
        <img src="./img/json.png" class="plain" height="160">
        <p>AFF specifies a JSON Schema per object type</p>
        <p>JSON Schema is generated from an ABAP type</p>
        <p>ABAP type is the common basis for serializers</p>
      </section>

      <section>
        <h2>Examples</h2>
        <ul>
          <li>Form-based object: BAdI Enhancement Spot</li>
          <li>Source-based object: ABAP Interface</li>
        </ul>
      </section>

      <section>

        <section>
          <h2>BAdI Enhancement Spot</h2>

          <div class="container">

            <div class="col">
              <p>ADT form-based editor</p>
              <img src="./img/enhs_adt.png" class="plain">
            </div>

            <div class="col">
              <p>AFF file</p>
              <pre style="font-size: 14px"><code data-trim data-noescape>
              {
                "formatVersion": "1",
                "header": {
                  "description": "",
                  "originalLanguage": "en"
                },
                "configuration": {
                  "tool": "badiDefinition"
                },
                "badiDefinitions": [
                  {
                    "name": "BADI_WB_OBJECT_VERS_PROVIDER",
                    "description": "BAdI  definition for workbench",
                    "interface": "IF_WB_OBJECT_VERSION_PROVIDER",
                    "instantiation": "creatingNewInstances",
                    "multipleUse": false,
                    "fallbackClass": "CL_BLUE_TLOGO_VERSION_PROVIDER",
                    "filters": [
                      {
                        "name": "OBJECT_TYPE",
                        "description": "Workbench object type",
                        "type": "characterLike"
                      }
                    ]
                  }
                ]
              }
              </code></pre>
            </div>
          </div>

        </section>

        <section>
          <h2>On filenames and formatting</h2>
          <p>Filename is composed by</p>
          <ul>
            <li class="fixed">obj_name.TYPE.json</li>
            </ul>
          <p>Ensure interchangeability by formatting</p>
          <ul>
            <li>UTF-8</li>
            <li>End-of-line marker LF ('\n')</li>
            <li>Empty line at end-of-file</li>
          </ul>
        </section>
      </section>

      <section>
        <section>
          <h2>ABAP Interface</h2>
          <p></p>
          <table>
            <tr>
              <th>File</th>
              <th>Description</th>
            </tr>
            <tr>
              <th class="fixed">object_name.intf.abap</th>
              <th>ABAP source code</th>
            </tr>
            <tr>
              <th class="fixed">object_name.intf.json</th>
              <th style="color:#42affa">Metadata file</th>
            </tr>
          </table>
        </section>

        <section>
          <h2>Metadata file in AFF</h2>
          <p>JSON data can be intuitive</p>
          <pre><code data-trim data-noescape>
            {
              "formatVersion": "1",
              "header": {
                "description": "AFF: Interface v1",
                "originalLanguage": "en"
              }
            }
          </code></pre>
          <p>Possible validation and annotation with JSON Schema, e.g. <a
              href="https://marketplace.visualstudio.com/items?itemName=larshp.vscode-abap-file-formats">VS Code
              Extension</a></p>
        </section>

        <section>
          <h2>Metadata file in abapGit</h2>

          The recent file format
<pre><code id="abapXmlExample"><script type="text/template"><?xml version="1.0" encoding="utf-8"?>
<abapGit version="v1.0.0" serializer="LCL_OBJECT_INTF" serializer_version="v1.0.0">
<asx:abap xmlns:asx="http://www.sap.com/abapxml" version="1.0">
  <asx:values>
  <VSEOINTERF>
    <CLSNAME>ZIF_ABAPGIT_AFF_INTF_V1</CLSNAME>
    <LANGU>E</LANGU>
    <DESCRIPT>AFF: Interface v1</DESCRIPT>
    <EXPOSURE>2</EXPOSURE>
    <STATE>1</STATE>
    <UNICODE>X</UNICODE>
  </VSEOINTERF>
  </asx:values>
</asx:abap>
</abapGit>
</script></code></pre>
        </section>

      </section>

      <section>
        <h2>AFF vision of ONE format</h2>

        <div class="container">
          <div class="col">
            <p>ADT History/Compare</p>
            <img src="./img/adt_compare.png" class="plain">
          </div>

          <div class="col">
            <p>abapGit</p>
            <img src="./img/abapgit_chkv.png" class="plain">
            <p>gCTS</p>
          </div>
        </div>
      </section>


      <section>
        <h2>Available object types</h2>
        <p><b>AFF is specified for:</b> AOBJ, APIC, APLO, CFDF, CHDO, CHKC, CHKO, CHKV, CLAS, DDLS, DDLX, DMON, DOMA, DSFI, EEEC,
          ENHO, ENHS, EVTB, FUGR, GSMP, INTF, NROB, RONT, SAJC, SAJT, SCP1, SITO, SMBC, SPRV, SRVB</p>
        <p><b>abapGit supports(via <a href="https://github.com/sbcgua/ajson">ajson</a>):</b> CHKC, CHKO, CHKV, EVTC, NONT, RONT, SMBC, INTF (experimental)</p>
        <p>SAP Basis 7.56 and newer provides serializer</p>
        <p>Focus is on JSON for new Object Types</p>
      </section>

      <section>
        <h2 class="fixed">BREAK-POINT.</h2>
      </section>

      <section>
        <h2>abapGit activation</h2>
        <ul>
          <li>Can be tested via "experimental" switch</li>
          <li>Will be enabled when no information is lost(<a href="https://github.com/SAP/abap-file-formats/issues/106">translations</a> and long text)</li>
          <li>Pull old format, stage new format</li>
          <li>Still 702 and up(if object works on the system)</li>
        </ul>
      </section>

      <section>
        <h2>abapGit migration</h2>
        handling old xml files => automatic conversion
<br><br>
        automated standalone migration path
<br><br>
        100s of xmls, takes time
      </section>

      <section>
        <h2>Schema Generation</h2>
        from ABAP in ABAP<br>
        <img src="./img/schemas1.drawio.svg" class="plain">
      </section>

      <section>
        <h2>Automated Schema Generation</h2>
        for everyone in the world, LINK?<br>
        <img src="./img/schemas2.drawio.svg" class="plain">
      </section>

      <section>
        <h2>Thanks to all contributors</h2>
list, todo
      </section>

      <section>
        <h2>Links</h2>
        <ul>
          <li><a href="https://github.com/SAP/abap-file-formats">github.com/SAP/abap-file-formats</a></li>
          <li><a href="https://github.com/SAP/abap-file-formats-tools">github.com/SAP/abap-file-formats-tools</a></li>
          <li><a href="https://github.com/sbcgua/ajson">github.com/sbcgua/ajson</a></li>
          <li><a href="https://abapgit.org">abapgit.org</a></li>
          <li><a href="https://abaplint.org">abaplint.org</a></li>
        </ul>
      </section>

      <section>
        <h2>#ABAPisNotDead</h2>
        <a href="https://larshp.github.io/abapconf2022/">https://larshp.github.io/abapconf2022/</a>
        <br>
        <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License"
            width="200" class="plain" src="img/by.svg" /></a>
        <br>
        <i class="fa fa-sun-o plain"></i>
      </section>

      <section>
        <i class="fa fa-question fa-6x plain"></i>
      </section>

    </div>
  </div>

  <script src="ext/reveal.js/dist/reveal.js"></script>
  <script src="ext/reveal.js/plugin/notes/notes.js"></script>
  <script src="ext/reveal.js/plugin/markdown/markdown.js"></script>
  <script src="ext/reveal.js/plugin/highlight/highlight.js"></script>
  <script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
      hash: true,
      slideNumber: true,
      transition: 'none',
      // Learn about plugins: https://revealjs.com/plugins/
      plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
    });
  </script>
</body>

</html>
